# Science Theme Park (Web Edition) - Master Design Document v2.1

> **核心信条**：世界不按玩家的意愿运转，除非玩家真正理解规则。

---

## 一、项目总体定位 (Project Identity)
### 1.1 项目本质
这是一个基于 **Next.js + React Three Fiber** 的 **Web 3D 硬核理科规则世界**。
- **平台转型**：彻底放弃 Roblox，转向独立 Web 开发，追求极致的视觉风格（Shaders/Post-processing）和完全可控的物理教学交互。
- **无需下载**：利用 Vercel 全球边缘网络分发，点击链接即玩（Mobile/Desktop），类似于 `fortunetelling-rust.vercel.app` 的便捷体验。
- **非传统的教育**：没有黑板，没有NPC讲课，没有多选题。
- **纯粹的生存**：玩家必须利用由于物理和数学定律构成的“世界法则”来生存、通关并获得荣耀。
- **验证而非教学**：游戏负责无情地验证玩家是否理解；如果不理解，世界会反馈“异常”和“失败”。

### 1.2 目标受众
- **核心层**：瑞士初高中学生（Grade 7-12），需要直观理解抽象概念。
- **广泛层**：所有 Roblox 玩家，被炫酷特效和高难度挑战吸引的“硬核玩家”。

---

## 二、世界观与场景美学 (World & Aesthetics)
*回答：我们在浏览器里应该呈现什么样的场景？*

### 2.1 总体风格：高对比度“实验室”美学
为了让“规则”显性化，环境必须极其干净。
- **参考风格**：《Portal》（传送门）、《Control》（控制）的星界、Vercel 官网极简风。
- **技术优势**：利用 WebGL Shader 实现玻璃折射、霓虹发光（Bloom）等在 Roblox 难以实现的高级特效。

### 2.2 核心区域场景定义 (Current Zones)
| 区域 | 场景主题 (Theme) | 视觉关键词 |
| :--- | :--- | :--- |
| **入口大厅** | **未来学院 (The Hub)** | 巨大全息投影、漂浮排行榜、连通各区的传送门 |
| **概率区** | **霓虹赌场 (Cyber Casino)** | 赛博朋克深色调、巨大的滚动数字、全息骰子、命运轮盘 |
| **力学区** | **极限测试场 (Test Chamber)** | 橙/白工业配色、巨大的活塞、风洞、碰撞测试假人 |
| **光学区** | **镜面迷宫 (Prism Palace)** | 极暗环境 + 激光束、玻璃折射、彩虹光效、Vaporwave 风格 |
| **电学区** | **能量核心 (Power Plant)** | 蓝色电弧、巨大的铜线圈、甚至有些恐怖的“高压危险”感 |

### 2.3 未来扩展区域 (Future Expansions)
根据瑞士 Gymnasium 物理数学大纲规划：
| 扩展区域 | 场景主题 | 对应知识点 |
| :--- | :--- | :--- |
| **热学区** | **熵之荒原 (The Entropy Wastes)** | 熔岩与冰川共存。**核心规则**：热量只能单向流动，粒子运动越快颜色越红。 |
| **量子/波区** | **概率云海 (Quantum Cloud)** | 场景模糊不清，观察导致坍缩。**核心规则**：双缝干涉，不确定性原理。 |
| **逻辑代数区** | **二进制堡垒 (Boolean Fortress)** | 由巨大的 0 和 1 砖块构成的移动城堡。**核心规则**：逻辑门开启通路 (AND/OR/NOT)。 |
| **微积分区** | **流变之城 (Flux City)** | 所有的路面斜率都在时刻变化。**核心规则**：导数控制瞬时方向，积分控制累积跳跃力。 |

---

## 三、核心游戏循环 (Core Gameplay Loop)

### 3.1 试错与验证
1.  **遭遇难题**：玩家面对一个断开的电路或无法跨越的鸿沟。
2.  **行动**：调整变量（电阻、角度、镜子位置）。
3.  **世界反馈**：
    - **失败**：物理后果立即显现（掉落、反弹伤害）。
    - **成功**：机关运作，获得极强的视觉反馈（灯光爆闪、音效激昂）。

### 3.2 失败反馈系统 (The Failure-Insight System)
当玩家失败时，系统不给答案，但提供线索：
- **Level 1 (现象标注)**：3D文字浮现“摩擦力不足”、“连败概率异常”。
- **Level 2 (可视化回放)**：提供“幽灵录像”显示受力箭头、光路轨迹。
- **Level 3 (复盘卡)**：显示相关公式索引（如 $F=ma$），但不给数值。

### 3.3 成功后的传承系统 (The Legacy Experience)
*当玩家成功之后，不仅是为了自己，也是为了后来者。*
- **机制**：通关后，弹出一个“经验胶囊”界面。
- **行动**：玩家从系统提供的概念库（如“动量守恒”、“二项分布”）中，勾选本关用到的核心概念。
- **思考复习**：这是一个强制的回忆与整理过程，确认玩家知道自己“为什么赢”。
- **传承**：这些胶囊会作为“漂流瓶”出现在该关卡入口，后续卡关的玩家捡起后，可以看到前人留下的概念提示（但不包含具体操作步骤）。

---

## 四、吸引力引擎 (The Attraction Engine)

### 4.1 视觉多巴胺 (Visual Juice)
让枯燥的参数变得“性感”：
- **速度**：物体越快，空气扭曲和拖尾越明显。
- **能量**：电压越高，线缆震动幅度和嗡嗡声越大。
- **成功**：通关瞬间的 Audio-Visual Bomb（全屏特效炸裂）。

### 4.2 智力外观化 (Social Flexing)
智力是唯一的货币，皮肤是地位的象征。
- **力学通关**：获得“重力场光环”（周围碎石悬浮）。
- **光学通关**：获得“折射披风”（身体半透明）。
- **电学通关**：获得“雷电之眼”（眼睛冒蓝光）。

---

## 五、社交与创造扩展 (Social & Creative Expansions)

### 5.1 双人/多人协作实验室 (Co-op Labs) - *未来高难度挑战*
*有些真理，一人无法举起。让学生带朋友一起玩。*
- **机制**：将复杂公式拆解。例如 $F=ma$，玩家A控制质量 $m$，玩家B控制加速度 $a$，两人必须配合达到目标力 $F$。
- **示例**：共振大桥（一人调频，一人定位）、双缝干涉（一人控制光源，一人移动挡板）。

### 5.2 沙盒建造 (Sandbox Mode) - *UGC创造*
*理解规则的最高境界是创造。*
- **解锁**：通关某章节后，获得该章节的“法则组件”（无摩擦板、理想电池等）。
- **玩法**：利用 React 组件化的优势，玩家可以拖拽这些物理组件，搭建自己的关卡并在 URL 中分享给朋友。
- **Web 可行性**：极高。利用 JSON 序列化关卡数据，生成短链接即可分享。

---

## 附录：瑞士初高中理科大纲映射 (Curriculum Roadmap)

*(此处保留原有 v1.1 版本的详细表格，作为开发索引)*
### 📚 数学篇 (Mathematics)
*(内容同前，略)*
### ⚛️ 物理篇 (Physics)
*(内容同前，略)*


> **核心信条**：世界不按玩家的意愿运转，除非玩家真正理解规则。

---

## 一、项目总体定位 (Project Identity)

### 1.1 项目本质
这是一个建立在 Roblox 物理引擎之上的**硬核理科规则世界**。
- **非传统的教育**：没有黑板，没有NPC讲课，没有多选题。
- **纯粹的生存**：玩家必须利用由于物理和数学定律构成的“世界法则”来生存、通关并获得荣耀。
- **验证而非教学**：游戏负责无情地验证玩家是否理解；如果不理解，世界会反馈“异常”和“失败”。

### 1.2 目标受众
- **核心层**：瑞士初高中学生（Grade 7-12），需要直观理解抽象概念。
- **广泛层**：所有 Roblox 玩家，被炫酷特效和高难度挑战吸引的“硬核玩家”。

---

## 二、世界观与场景美学 (World & Aesthetics)

*回答：我们在 Roblox 里应该建造什么样的场景？*

### 2.1 总体风格：高对比度“实验室”美学 (The Lab Aesthetics)
为了让“规则”显性化，环境必须极其干净。
- **参考风格**：《Portal》（传送门）、《Control》（控制）的星界、Apple Store 极简风。
- **材质**：大量的纯白网格（Grid）、发光玻璃、混凝土。减少杂乱的纹理，确保玩家能看清每一个物理运动的轨迹。

### 2.2 区域场景定义
| 区域 | 场景主题 (Theme) | 视觉关键词 |
| :--- | :--- | :--- |
| **入口大厅** | **未来学院 (The Hub)** | 巨大全息投影、漂浮排行榜、连通各区的传送门 |
| **概率区** | **霓虹赌场 (Cyber Casino)** | 赛博朋克深色调、巨大的滚动数字、全息骰子、命运轮盘 |
| **力学区** | **极限测试场 (Test Chamber)** | 橙/白工业配色、巨大的活塞、风洞、碰撞测试假人 |
| **光学区** | **镜面迷宫 (Prism Palace)** | 极暗环境 + 激光束、玻璃折射、彩虹光效、Vaporwave 风格 |
| **电学区** | **能量核心 (Power Plant)** | 蓝色电弧、巨大的铜线圈、甚至有些恐怖的“高压危险”感 |

---

## 三、核心游戏循环 (Core Gameplay Loop)

### 3.1 试错与验证
1.  **遭遇难题**：玩家面对一个机关（如：一个断开的电路，一道无法跨越的鸿沟）。
2.  **行动**：玩家调整变量（改变电阻、调整起跳角度、放置镜子）。
3.  **世界反馈**：
    - **成功**：机关运作，获得极强的视觉反馈（灯光爆闪、音效激昂）。
    - **失败**：物理后果立即显现（掉落、反弹伤害、短路爆炸）。

### 3.2 失败反馈系统 (The Failure-Insight System)
当玩家失败时，系统不给答案，但提供线索：
- **Level 0 (默认)**：自然后果。
- **Level 1 (现象标注)**：3D文字浮现“摩擦力不足”、“连败概率异常”。
- **Level 2 (可视化回放)**：提供“幽灵录像”，显示受力箭头、速度矢量、光路轨迹。
- **Level 3 (复盘卡)**：显示相关公式索引（如 $F=ma$），但不给数值。

---

## 四、扩展玩法系统 (Extended Gameplay)

### 4.1 社交与协作 (Co-op Labs)
*有些真理，一人无法举起。*
- **机制**：将复杂公式拆解。例如 $F=ma$，玩家A控制质量 $m$，玩家B控制加速度 $a$，两人必须配合达到目标力 $F$。
- **示例**：共振大桥（一人调频，一人定位）、双缝干涉（一人控制光源，一人移动挡板）。

### 4.2 沙盒建造 (Sandbox Mode)
*理解规则的最高境界是创造。*
- **解锁**：通关某章节后，获得该章节的“法则组件”（无摩擦板、理想电池等）。
- **玩法**：玩家并在自己的空岛上设计“物理陷阱”，发布给全服挑战。

### 4.3 “复盘券”经济 (Peer Review Economy)
- **悬赏**：卡关玩家发布悬赏。
- **导师**：通关的高阶玩家进入其房间，利用“画笔工具”在场景中标注问题。
- **收益**：导师获得“教授点数”兑换限定皮肤。

---

## 五、吸引力引擎 (The Attraction Engine)

### 5.1 视觉多巴胺 (Visual Juice)
让枯燥的参数变得“性感”：
- **速度**：物体越快，空气扭曲和拖尾越明显。
- **能量**：电压越高，线缆震动幅度和嗡嗡声越大。
- **成功**：通关瞬间的 Audio-Visual Bomb（全屏特效炸裂）。

### 5.2 智力外观化 (Social Flexing)
智力是唯一的货币，皮肤是地位的象征。
- **力学通关**：获得“重力场光环”（周围碎石悬浮）。
- **光学通关**：获得“折射披风”（身体半透明）。
- **电学通关**：获得“雷电之眼”（眼睛冒蓝光）。

---

## VI. 技术架构与交互演进 (Technical & UX Evolution)

### 6.1 技术栈 (The Anti-Gravity Stack)
- **Core**: Next.js (App Router) + TypeScript
- **3D Engine**: React Three Fiber (Three.js)
- **Physics**: React Three Rapier (WASM-based high performance physics)
- **UI/UX**: TailwindCSS + Framer Motion (HUD 风格界面)
- **I18n**: 英语 (EN) / 德语 (DE) / 中文 (CN) 三语完全适配
- **Deployment**: Vercel (CI/CD 自动化部署)

### 6.2 交互架构路线图 (Navigation Roadmap)

#### Phase 1: 档案库模式 (The Archive - MVP)
- **入口协议 (Entry Protocol)**：
    - 黑屏打字机效果显示核心信条：“WARNING: The world does not revolve around you...”
    - 用户需长按 [I ACCEPT] 3秒方可进入。
- **主界面**：
    - **网格列表**：类似于 SCP 档案库或高科技数据库。
    - **过滤器**：按“学科 (Math/Physics)”和“年级 (Grade 7-12)”筛选。
- **实验容器**：
    - 左侧：3D 交互视窗。
    - 右侧：控制台 (HUD) 与数据图表。

#### Phase 2: 全息枢纽模式 (The Holographic Nexus - Target)
- **地铁线路图 (The Metro Map)**：
    - **X轴**：年级 (时间)。
    - **Y轴**：主题线 (力学线、几何线、微积分线)。
    - **交叉点**：由于知识点重叠而形成的“换乘站” (e.g., 向量 = 几何 + 力学)。
- **交互**：
    - 滑动时间轴高亮特定年级。
    - 鼠标悬停节点显示全息预览 (GIF/Video)。
    - 镜头无缝推入进入实验。

### 6.3 模块化开发技术规范 (Modular Technical Standard)

针对后续新增模块（M-G07, M-G08...），必须遵循以下硬性技术要求以确保生产环境构建成功：

1.  **i18n 同步要求 (Mandatory i18n Sync)**：
    *   **三语对齐**：每个新模块必须在 `src/lib/i18n.ts` 中同时补齐 `EN` / `DE` / `CN` 的词库。
    *   **首页注册**：必须在 `translations.[LANG].home` 对象中添加模块标题 (`mgXX_title`) 和副标题 (`mgXX_subtitle`)。
    *   **对齐键名**：主页引用的键名必须与 i18n 文件中的键名严格匹配。

2.  **类型安全验证 (Type Safety)**：
    *   **禁止基于猜测的修改**：修改 i18n 或主页后，**必须**在本地运行 `npm run build`。Vercel 部署失败通常是因为 TS 类型检查未通过。
    *   **接口定义**：在模块内部，推荐使用 `type MgXXT = typeof translations.EN.mgXX` 来确保翻译引用的严谨性。

3.  **导航路由规范 (Navigation & Routing)**：
    *   **路径对齐**：`src/app/page.tsx` 中的 `<Link href="/chamber/mgXX">` 必须与文件系统路径物理对应。
    *   **Card 视觉一致性**：新模块 Card 必须包含 `mgXX_title` 和 `mgXX_subtitle`。

### 6.4 每日仪式 (Daily Ritual)
> 开发者注：每次启动项目前，必须回顾此文档的架构规划，确保所有新功能不偏离“扁平化导航”与“硬核美学”的初衷。

---

## 附录：瑞士初高中理科大纲映射 (Curriculum Roadmap)

本表基于瑞士 **Plan d'études romand (PER)** / **Lehrplan 21** (初中/Sek I) 及 **Maturité gymnasiale** (高中/Sek II) 教学大纲整理。我们将这些学术章节转化为游乐园的“主题大区”与“核心规则”。

### 📚 数学篇 (Mathematics)

#### 阶段一：初中 (Secondary I, Grade 7-9) —— “构建逻辑的骨架”

| 核心大区 | 瑞士教学章节 (Themes) | 核心重难点 (The "Heavy" Points) | 对应的“游乐园规则” |
| :--- | :--- | :--- | :--- |
| **代数基础区**<br>(Variable Valley) | **数的运算与集合**<br>(Nombres solida, Rationnels) | **负数运算**：减去负数等于加上正数。<br>**分数逻辑**：通分与约分的抽象性。 | **规则**：方向即符号。游乐设施必须通过反向操作来通过“负数门”。 |
| | **文字式与方程**<br>(Calcul littéral) | **抽象化**：从具体数字 $3+5$ 到抽象符号 $a+b$。<br>**等式平衡**：移项变号的本质是“天平两端同加减”。 | **规则**：天平法则。你必须在天平两端同时操作，否则世界倾斜，玩家坠落。 |
| **几何空间区**<br>(Geometry Grounds) | **平面几何**<br>(Thalès, Pythagore) | **勾股定理**：直角三角形边的平方关系。<br>**相似性**：比例缩放，角度不变。 | **规则**：面积守恒与比例锁定。错误的缩放会导致物体结构崩塌。 |
| **函数启蒙区**<br>(Function Factory) | **线性函数**<br>(Fonctions linéaires, $y=ax+b$) | **对应关系**：输入 $x$ 唯一确定输出 $y$。<br>**斜率 $a$ 与截距 $b$**：图形特征与代数参数的对应。 | **规则**：输入输出机器。你不能直接控制结果，只能通过调整参数 $a$ 和 $b$ 来改变机器的产出路径。 |

#### 阶段二：高中 (Secondary II / Gymnasium, Grade 10-12) —— “掌握变化的规律”

| 核心大区 | 瑞士教学章节 (Themes) | 核心重难点 (The "Heavy" Points) | 对应的“游乐园规则” |
| :--- | :--- | :--- | :--- |
| **函数与微积分区**<br>(Calculus City) | **分析/微积分**<br>(Analyse: Dérivées, Intégrales) | **极限**：无限逼近 $0/0$ 的动态过程。<br>**导数**：瞬时变化率（切线斜率）。<br>**积分**：累积量与面积的关系。 | **规则**：瞬间冻结。只有在这一瞬间（dt趋于0）才能看清速度的真面目。面积即能量。 |
| **高级代数区**<br>(Vector Void) | **向量几何**<br>(Géométrie vectorielle) | **向量运算**：既有大小又有方向的量。<br>**空间思维**：3D 坐标系中的平面与直线方程。 | **规则**：独立分量。X轴的受力永远不会影响Y轴的运动。必须分解维度思考。 |
| **概率统计深水区**<br>(Probability Casino) | **组合与概率**<br>(Combinatoire, Probabilités) | **条件概率**：信息改变概率空间（贝叶斯）。<br>**分布**：二项分布、正态分布的规律。 | **规则**：大数审判。单次结果随机，但一万次操作的结果被严格锁定。试图靠运气闯关会被大数定律吞噬。 |

### ⚛️ 物理篇 (Physics)

#### 阶段一：初中 (Secondary I) —— “看见现象背后的力”

| 核心大区 | 瑞士教学章节 (Themes) | 核心重难点 (The "Heavy" Points) | 对应的“游乐园规则” |
| :--- | :--- | :--- | :--- |
| **经典力学区**<br>(Newton's Playground) | **运动学基础**<br>(Vitesse, Distance) | **速度 vs 加速度**：区分“快”与“变快”。 | **规则**：惯性定律。没有外力，你就永远停不下来（或动不起来）。 |
| | **力与质量**<br>(Forces, Masse vs Poids) | **重力与质量的区别**。<br>**力的平衡**：合力为零时保持匀速。 | **规则**：无重力走廊。在这里，$100kg$ 的铁球没有重量，但撞它是找死（质量惯性仍在）。 |
| **光学迷宫**<br>(Optics Maze) | **几何光学**<br>(Réflexion, Réfraction) | **光沿直线传播**。<br>**折射**：介质改变导致光速改变进而偏折。 | **规则**：视线欺诈。你看到的物体位置不是真的，必须计算折射率才能抓取实体。 |
| **电学初级区**<br>(Circuit Circuit) | **基本电路**<br>(Loi d'Ohm, Séries/Parallèles) | **电流不消耗**：流进多少流出多少。<br>**电压是电势差**：类似水压。 | **规则**：回路法则。路不通，电不走。灯泡不是吸电怪，是阻力点。 |

#### 阶段二：高中 (Secondary II / Gymnasium) —— “驾驭能量与场”

| 核心大区 | 瑞士教学章节 (Themes) | 核心重难点 (The "Heavy" Points) | 对应的“游乐园规则” |
| :--- | :--- | :--- | :--- |
| **动力学核心区**<br>(Dynamics Domain) | **能量守恒**<br>(Travail, Énergie cinétique/potentielle) | **功的定义**：力与位移同向才做功。<br>**能量转化**：动能势能互转，总量不变。 | **规则**：等价交换。想爬升高度（势能），必须消耗速度（动能）。没有免费的午餐。 |
| | **圆周运动**<br>(Mouvement circulaire) | **向心力**：受力指向圆心，速度方向切向。<br>**离心力的错觉**。 | **规则**：死亡回旋。一旦切断向心绳索，你不会飞离圆心，而是沿切线飞出。 |
| **电磁场域**<br>(Electromagnetic Field) | **电场与磁场**<br>(Champs E & B, Forces de Lorentz) | **场是物质**：看不见但我把你推开。<br>**右手定则**：电流、磁场、力的3D关系。 | **规则**：隐形强风。看不见任何东西，但你会被奇怪的力量推向侧面（洛伦兹力）。需要三只手（右手定则）来导航。 |
| **波与现代物理**<br>(Quantum Quay) | **波动学**<br>(Ondes, Interférences) | **波的叠加**：两个波相遇可能消失（相消干涉）。<br>**多普勒效应**：频率随速度改变。 | **规则**：相位对消。站在正确的位置，巨大的震动会瞬间归零（波节）。 |
