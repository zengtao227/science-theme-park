# 扩展设计分稿：逻辑代数与代数运算区 (Zone Design: Logic & Algebra)

> **场景代号**：二进制堡垒 (The Boolean Fortress) & 代数工厂 (Algebra Factory)
> **对应章节**：
> 1. **逻辑代数**：Kangourou Math 逻辑题、计算机基础。
> 2. **初中代数**：多项式乘法公式 $(a+b)(a-b)=a^2-b^2$、$(a+b)^2=a^2+2ab+b^2$。

---

## 1. 区域视觉与氛围 (Visual & Atmosphere)

*   **风格**：《我的世界》红石电路风格 + 《纪念碑谷》的几何错觉。
*   **核心隐喻**：
    *   **逻辑**：电路的通断 = 门的开关。
    *   **代数公式**：**面积的拼图**。将抽象的 $(a+b)^2$ 转化为可视化的面积拼接。

---

## 2. 核心教学目标与机制映射 (Mapping)

| 痛点知识点 (The Hard Part) | 游戏化隐喻 (The Game Mechanic) | 编程逻辑 (Scripting Logic) |
| :--- | :--- | :--- |
| **逻辑推理** (Logic Gates)<br>AND, OR, NOT 的组合逻辑。 | **“真理通道”**<br>只有满足特定逻辑条件的门才会打开。比如“只有当你拿着红钥匙且没穿鞋子时，门才开”（A AND NOT B）。 | 简单的 `bool` 运算。<br>检测玩家属性 `Inventory` 和 `Appearance`。 |
| **平方差公式** $(a+b)(a-b)$<br>为什么等于 $a^2-b^2$？ | **“消失的角落”** (The Missing Corner)<br>玩家需要用不同大小的地板砖拼出一条路。必须剪掉一个 $b^2$ 的角，剩下的部分重组才能变成长方形。 | **CSG (Constructive Solid Geometry)** 实时建模。<br>玩家拖动滑块改变 $a$ 和 $b$ 的值，地形实时变形。 |
| **完全平方公式** $(a+b)^2$<br>经常漏掉中间的 $2ab$。 | **“完美正方形挑战”**<br>玩家只有 $a^2$ 和 $b^2$ 两个零件，怎么拼都拼不成大正方形，必须找到两个 $ab$ 长条补进去才能启动电梯。 | 碰撞检测。<br>只有填满所有空隙（Sum Area = $(a+b)^2$），触发器才会激活。 |

---

## 3. 关卡流程设计 (Level Walkthrough)

### 分区 A：二进制逻辑迷宫 (The Logic Maze) - *Kangourou 风格*

#### 关卡 1: “并且”的双重锁 (The AND Gate)
*   **谜题**：面前有两座吊桥，桥下是深渊。桥头有两个巨大的压力板。
*   **规则**：
    *   左板：检测重量 $>50$。
    *   右板：检测是否持有“蓝色方块”。
    *   逻辑门显示：**AND**。
*   **解法**：玩家必须先去寻找蓝色方块，然后站在板上。如果只满足一个条件，桥只会升起一半（摔死）。

#### 关卡 2: “或者”的选择 (The OR Gate)
*   **谜题**：一扇巨大的激光门。
*   **规则**：门上写着 `Input A (Green Ball)` OR `Input B (Red Ball)` -> Open。
*   **陷阱**：前面有一个**非门 (NOT)** 区域。如果玩家拿着绿色球通过非门区，球会变成红色。
*   **Kangourou 风格反转**：题目要求的是“让门**关闭**”。玩家必须想办法让两个输入都为 False（既不拿红也不拿绿，或者通过逻辑转换抵消）。

### 分区 B：代数拼图工厂 (The Algebra Assembly) - *解决计算困难*

#### 关卡 3: 平方差走廊 (Description of $(a+b)(a-b)$)
*   **场景**：玩家在一个巨大的矩形平台上。矩形的长是 $a+b$，宽是 $a-b$。
*   **目标**：将这个长方形重组成一个正方形缺一角的状态。
*   **操作**：
    1.  玩家切下一块 $b \times (a-b)$ 的区域。
    2.  将其旋转 90 度拼接到另一边。
    3.  玩家惊奇地发现，它变成了一个边长为 $a$ 的大正方形，但缺了一个边长为 $b$ 的小正方形角落。
    4.  **视觉强化**：地面上浮现巨大的公式 $Area = a^2 - b^2$。

#### 关卡 4: 漏掉的 2ab (The Missing Middle)
*   **BOSS 战机制**：BOSS 是一个巨大的正方形机甲 $(a+b)^2$。
*   **弱点**：它由四部分组成：$a^2$（头），$b^2$（核心），和两个 $ab$（双臂）。
*   **玩家任务**：玩家必须攻击它的双臂（$2ab$）。如果只攻击头和核心（错以为 $(a+b)^2 = a^2+b^2$），BOSS 会无限回血。
*   **通关语**：击碎双臂后，BOSS 散架，系统提示：“你找到了丢失的中间项！”

---

## 4. 资产需求 (Assets)

### 脚本
- `LogicGate.lua`: 通用的逻辑门类（支持 AND, OR, NOT, XOR）。
- `GeometryShifter.lua`: 用于代数区，支持这一秒是长方形，下一秒平滑过渡变成正方形的动画脚本。

### 模型
- **逻辑砖块**：发光的红石线条。
- **代数积木**：标有 $a, b, a^2, ab$ 字样的可搬运方块。

---

*设计意图：将代数运算的“死记硬背”转化为“空间几何”的直观体验，彻底解决 $2ab$ 容易漏掉的问题。*
