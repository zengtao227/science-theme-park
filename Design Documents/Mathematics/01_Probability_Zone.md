# 设计分稿：数学-概率区 (Zone Design: Probability)

> **场景代号**：霓虹赌场 (The Neon Casino)
> **对应章节**：初中/高中数学 - 统计与概率 (Statistics & Probability)

---

## 1. 区域视觉与氛围 (Visual & Atmosphere)

*   **风格**：赛博朋克 (Cyberpunk) / 蒸汽波 (Vaporwave)。
*   **光照**：极暗的背景（黑色 Skybox），所有的光源来自于发光的几何体、滚动的数字和激光。
*   **环境音效**：电子合成器背景乐 (Synthwave)，类似心跳的低频节奏。转盘转动的机械声，金币掉落的清脆声。
*   **核心隐喻**：命运不是运气，而是数学计算的结果。

---

## 2. 核心教学目标与机制映射 (Mapping)

| 教学重难点 (The Hard Part) | 游戏化隐喻 (The Game Mechanic) | 编程逻辑 (Scripting Logic) |
| :--- | :--- | :--- |
| **独立事件** (Independent Events)<br>扔骰子前一次的结果不影响下一次。 | **“无记忆之桥”**<br>桥面由骰子组成，玩家常犯“赌徒谬误”（觉得连续出大下次一定出小），导致坠落。 | `math.random(1,6)` 每次独立调用。<br>不设伪随机保底。 |
| **条件概率** (Conditional Probability)<br>三门问题 (Monty Hall)。 | **“三门大厅”**<br>主持人打开一扇空门后，玩家必须物理移动位置来“换门”，直观体验概率从 1/3 变 2/3。 | 状态机：<br>1. 玩家初选<br>2. 系统开羊门<br>3. 玩家二次选择 |
| **大数定律** (Law of Large Numbers)<br>只有样本足够大，频率才趋近概率。 | **“万次审判” (Boss战)**<br>单次攻击伤害波动极大，只有快速连续输出（高频采样），伤害总和才能稳定击杀 Boss。 | 记录 `TotalDamage`<br>计算 `AverageDamage`<br>可视展示 `CurrentVariance` (方差) |

---

## 3. 关卡流程脚本 (Level Scripting Walkthrough)

### 关卡 1：二项式大门 (The Binomial Gate)
*   **场景描述**：一道巨大的门，上有红绿两盏灯快速交替闪烁。
*   **玩法**：
    1.  玩家必须在绿灯亮起瞬间穿过。
    2.  实际上灯的切换频率极快（0.1s），人类反应无法跟上。
    3.  玩家发现门上刻着概率 $P(Green) = 0.5$。
*   **通关逻辑**：并不是靠反应，而是靠“多次尝试”。门旁边有一个计数器，累计尝试次数。只要尝试次数 $N$ 足够多，总有一次会过。
*   **复盘点**：失败并不可怕，概率是分母的游戏。

### 关卡 2：赌徒谬误走廊 (Gambler's Fallacy Hall)
*   **场景描述**：一条长廊，地板由显示的数字板组成（1-6）。
*   **规则**：虽然显示 1-6，但下一块板的安全数字完全随机。
*   **陷阱**：系统会故意连续 5 次生成“6”。
*   **玩家行为**：大多数玩家第 6 次会不敢踩“6”，觉得“不可能再是6了”。
*   **惩罚**：实际上第 6 次还是随机，如果玩家避开“6”去踩别的，等于放弃了 1/6 的生机。
*   **编程提示**：服务端直接生成纯随机数，不要做“防连抽”优化。

### 关卡 3：三门问题实体化 (The Monty Hall Physical)
*   **场景描述**：三个巨大的升降梯（A, B, C）。只有一个能上升通往出口，另外两个底部是岩浆。
*   **流程**：
    1.  玩家站上 A。
    2.  系统提示：“你选了 A。我现在告诉你，C 是岩浆。”（C 升降梯坠落）。
    3.  系统问：“你现在想换到 B 吗？”
*   **数据统计**：
    - 坚持不换（A）：胜率 33.3%。
    - 换（B）：胜率 66.7%。
*   **视觉反馈**：地板上实时显示两条光路，一条是细的（不换），一条是粗的（换），暗示概率大小。

### 关卡 4 (Boss)：不确定性之主 (Lord of Variance)
*   **外形**：一个由无数噪点和乱码组成的球体。
*   **战斗机制**：
    - 玩家手持一把“概率枪”。说明书写着：攻击力 0-100，期望值 50。
    - Boss 血量 5000。
    - **玩家误区**：打几下发现伤害只有 5，觉得枪坏了。
    - **正解**：必须按住左键**极高频射击**。虽然单发伤害在 0-100 乱跳，但射速够快（每秒 50 发），每秒伤害会稳定在 2500 左右。
*   **高潮时刻**：当样本量（射击次数）突破 1000 时，原本混乱的弹道汇聚成一条稳定的激光束（方差趋零），瞬间击穿 Boss。

---

## 4. Roblox 开发资产需求清单 (Assets List)

### 脚本 (Scripts)
- `ProbabilityManager.lua`: 处理真随机数生成，不使用伪随机。
- `MontyHallController.lua`: 控制三门升降梯的逻辑状态机。
- `DataVisualizer.lua`: 将后台的随机数历史可视为 3D 图表。

### 模型 (Models)
- **全息骰子**：半透明发光，能物理滚动。
- **动态概率板**：能显示实时数字的 SurfaceGui。
- **Boss 模型**：粒子特效聚合体，无固定模型。

### 音效 (Audio)
- 成功时的“硬币入袋”声 (Cha-ching)。
- 失败时的“噪音故障”声 (Glitch noise)。
- Boss 战中，随着样本增加，背景音乐从杂乱无章变得富有节奏（象征从混乱到有序）。
