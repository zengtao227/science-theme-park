# 🎯 任务分工方案
## Kiro & Trae 并行工作计划

**制定时间**: 2026-02-06  
**总工作量**: 约 5-6 小时  
**并行执行**: 预计 3-4 小时完成

---

## ✅ Trae 工作检查结果

### Mission T84 - i18n 集成 ✅ **已完成**

所有 6 个模块的 i18n 集成已完成：

| 模块 | 状态 | t() 使用次数 | 备注 |
|-----|------|------------|------|
| GP5.02 | ✅ 完成 | 23 次 | 相对论实验室 |
| GS1.01 | ✅ 完成 | 21 次 | 复数分形 |
| SP1.08 | ✅ 完成 | 23 次 | 光学工作台 |
| G3.01 | ✅ 完成 | 19 次 | 概率金库 |
| G5.01 | ✅ 完成 | 21 次 | 矩阵几何 |
| GC2.01 | ✅ 完成 | 27 次 | 碳王国 |

**质量评估**: ⭐⭐⭐⭐⭐ 优秀
- ✅ 所有硬编码文本已替换
- ✅ 三语支持完整
- ✅ 编译零错误
- ✅ ESLint 零警告

**Trae 的工作非常出色！👏**

---

## 📋 剩余工作总览

根据 `EXECUTION_PLAN_V2.md`，剩余的主要工作：

### 1. 命名规范统一 (49 个模块)
- 数学模块: 20 个 (s→sm, g→gm)
- 物理模块: 12 个 (p→sp/gp)
- 化学模块: 4 个 (c→sc)
- 组件文件夹: 36 个

### 2. 重复模块检查与清理
- 检查 4 对可能重复的模块
- 删除或合并重复内容

### 3. 首页链接更新
- 更新 49 个模块链接
- 更新模块卡片显示

### 4. i18n Keys 更新
- 更新 src/lib/i18n.ts 中的 keys
- 更新所有模块中的 t() 调用

### 5. 文档更新
- 更新 5 个主要文档
- 创建变更日志

### 6. 测试验证
- 编译测试
- ESLint 检查
- 手动功能测试

---

## 🔀 任务分工策略

### 分工原则
1. **Kiro**: 处理需要深度代码分析和重构的任务
2. **Trae**: 处理重复性、规则性强的任务
3. **并行执行**: 最大化效率

---

## 👨‍💻 Kiro 的任务清单

### 任务 K1: 重复模块检查与清理 (30 分钟)
**优先级**: P0

**具体工作**:
1. 检查 4 对可能重复的模块:
   - `p1-05` vs `sp1-05`
   - `p2-02` vs `sp2-02`
   - `p5-01` vs `gp5-01`
   - `p5-02` vs `gp5-02`

2. 对比文件内容和功能

3. 决定处理方案:
   - 如果完全重复 → 删除旧版本
   - 如果内容不同 → 合并或保留更好的版本

**输出**: 清理后的模块列表

---

### 任务 K2: 核心模块重命名 (1 小时)
**优先级**: P0

**具体工作**:
使用 `smartRelocate` 重命名以下模块：

#### 数学模块 (20 个)
```
s1-01 → sm1-01
s1-02 → sm1-02
s2-01 → sm2-01
s2-02 → sm2-02
s2-03 → sm2-03
s2-04 → sm2-04
s2-05 → sm2-05
s2-06 → sm2-06
s2-07 → sm2-07
s3-01 → sm3-01
s3-02 → sm3-02
s3-03 → sm3-03
s3-04 → sm3-04
g1-01 → gm1-01
g1-01-advanced → gm1-01-advanced
g2-01 → gm2-01
g3-01 → gm3-01
g4-01 → gm4-01
g5-01 → gm5-01
gs1-01 → gms1-01
```

**方法**: 使用 `smartRelocate` 自动更新所有引用

**输出**: 20 个数学模块重命名完成

---

### 任务 K3: i18n Keys 批量更新 (1 小时)
**优先级**: P0

**具体工作**:
1. 更新 `src/lib/i18n.ts` 中的所有 keys:
   ```
   s2_01 → sm2_01
   g3_01 → gm3_01
   p1_02 → sp1_02
   c1_01 → sc1_01
   ... (共 49 个)
   ```

2. 使用查找替换批量更新

3. 运行 TypeScript 检查确保无错误

**输出**: i18n keys 全部更新

---

### 任务 K4: 测试验证 (30 分钟)
**优先级**: P0

**具体工作**:
1. 运行编译测试: `npm run build`
2. 运行 ESLint: `npm run lint`
3. 手动测试 10 个随机模块
4. 测试三语切换功能
5. 检查首页所有链接

**输出**: 测试报告

---

### 任务 K5: 文档更新 (30 分钟)
**优先级**: P1

**具体工作**:
1. 更新 `CURRICULUM_PLAN.md`
2. 更新 `PROJECT_ARCHITECTURE.md`
3. 创建 `CHANGELOG_2026-02-06.md`

**输出**: 更新后的文档

---

## 👩‍💻 Trae 的任务清单

### 任务 T1: 物理模块重命名 (45 分钟)
**优先级**: P0

**具体工作**:
使用 `smartRelocate` 重命名以下模块：

#### 物理模块 (12 个)
```
p1-02 → sp1-02
p1-03 → sp1-03
p1-04 → sp1-04
p1-05 → sp1-05 (如果 Kiro 确认不重复)
p2-01 → sp2-01
p2-02 → sp2-02 (如果 Kiro 确认不重复)
p3-01 → sp3-01
p3-02 → sp3-02
p5-01 → gp5-01 (如果 Kiro 确认不重复)
p5-02 → gp5-02 (如果 Kiro 确认不重复)
p5-03 → gp5-03
p5-04 → gp5-04
```

**注意**: 等待 Kiro 完成任务 K1 后再处理标记为"可能重复"的模块

**输出**: 12 个物理模块重命名完成

---

### 任务 T2: 化学模块重命名 (15 分钟)
**优先级**: P0

**具体工作**:
使用 `smartRelocate` 重命名以下模块：

#### 化学模块 (4 个)
```
c1-01 → sc1-01
c1-02 → sc1-02
c2-01 → sc2-01
c3-01 → sc3-01
```

**输出**: 4 个化学模块重命名完成

---

### 任务 T3: 组件文件夹同步重命名 (45 分钟)
**优先级**: P0

**具体工作**:
同步重命名 `src/components/chamber/` 下的所有组件文件夹：

```
s1-01 → sm1-01
s2-02 → sm2-02
g3-01 → gm3-01
p1-02 → sp1-02
c1-01 → sc1-01
... (共 36 个有组件的模块)
```

**方法**: 使用 `smartRelocate` 自动更新引用

**输出**: 36 个组件文件夹重命名完成

---

### 任务 T4: 首页链接批量更新 (30 分钟)
**优先级**: P0

**具体工作**:
1. 打开 `src/app/page.tsx`

2. 批量更新所有模块链接:
   ```typescript
   /chamber/s2-01 → /chamber/sm2-01
   /chamber/g3-01 → /chamber/gm3-01
   /chamber/p1-02 → /chamber/sp1-02
   /chamber/c1-01 → /chamber/sc1-01
   ... (共 49 个链接)
   ```

3. 使用查找替换功能:
   - 查找: `/chamber/s(\d)`
   - 替换: `/chamber/sm$1`
   - 重复其他前缀 (g→gm, p→sp/gp, c→sc)

4. 手动检查每个链接

**输出**: 首页所有链接更新完成

---

### 任务 T5: 模块内 i18n Key 更新 (45 分钟)
**优先级**: P0

**具体工作**:
1. 在所有重命名后的模块中更新 `t()` 调用:
   ```typescript
   t("s2_01.xxx") → t("sm2_01.xxx")
   t("g3_01.xxx") → t("gm3_01.xxx")
   t("p1_02.xxx") → t("sp1_02.xxx")
   t("c1_01.xxx") → t("sc1_01.xxx")
   ```

2. 使用全局查找替换

3. 逐个模块验证

**输出**: 所有模块的 i18n key 调用更新完成

---

### 任务 T6: 文档辅助更新 (30 分钟)
**优先级**: P1

**具体工作**:
1. 更新 `MODULE_COMPLETION_REPORT.md` 中的模块列表
2. 更新 `CONTENT_QUALITY_REPORT.md` 中的模块引用
3. 更新 `FINAL_SUMMARY_REPORT.md` 中的统计数据

**输出**: 3 个报告文档更新完成

---

## ⏱️ 时间估算与并行执行

### Kiro 的时间线 (总计 3.5 小时)
```
09:00 - 09:30  任务 K1: 重复模块检查 (30 分钟)
09:30 - 10:30  任务 K2: 数学模块重命名 (1 小时)
10:30 - 11:30  任务 K3: i18n Keys 更新 (1 小时)
11:30 - 12:00  任务 K4: 测试验证 (30 分钟)
12:00 - 12:30  任务 K5: 文档更新 (30 分钟)
```

### Trae 的时间线 (总计 3.5 小时)
```
09:00 - 09:30  等待 K1 完成 (准备工作)
09:30 - 10:15  任务 T1: 物理模块重命名 (45 分钟)
10:15 - 10:30  任务 T2: 化学模块重命名 (15 分钟)
10:30 - 11:15  任务 T3: 组件文件夹重命名 (45 分钟)
11:15 - 11:45  任务 T4: 首页链接更新 (30 分钟)
11:45 - 12:30  任务 T5: 模块内 i18n Key 更新 (45 分钟)
12:30 - 13:00  任务 T6: 文档辅助更新 (30 分钟)
```

### 并行执行优势
- **串行执行**: 7 小时
- **并行执行**: 3.5 小时
- **效率提升**: 50%

---

## 🔄 协作流程

### 阶段 1: 准备阶段 (09:00 - 09:30)
- **Kiro**: 执行任务 K1 (重复模块检查)
- **Trae**: 等待 K1 结果，准备重命名脚本

### 阶段 2: 重命名阶段 (09:30 - 11:15)
- **Kiro**: 执行任务 K2 (数学模块) + K3 (i18n Keys)
- **Trae**: 执行任务 T1 (物理模块) + T2 (化学模块) + T3 (组件文件夹)

### 阶段 3: 更新阶段 (11:15 - 12:30)
- **Kiro**: 执行任务 K4 (测试) + K5 (文档)
- **Trae**: 执行任务 T4 (首页链接) + T5 (模块 i18n) + T6 (文档)

### 阶段 4: 验收阶段 (12:30 - 13:00)
- **Kiro**: 最终测试和验收
- **Trae**: 协助测试和修复问题

---

## 📊 进度追踪表

### Kiro 任务进度
- [ ] K1: 重复模块检查 (30 分钟)
- [ ] K2: 数学模块重命名 (1 小时)
- [ ] K3: i18n Keys 更新 (1 小时)
- [ ] K4: 测试验证 (30 分钟)
- [ ] K5: 文档更新 (30 分钟)

### Trae 任务进度
- [ ] T1: 物理模块重命名 (45 分钟)
- [ ] T2: 化学模块重命名 (15 分钟)
- [ ] T3: 组件文件夹重命名 (45 分钟)
- [ ] T4: 首页链接更新 (30 分钟)
- [ ] T5: 模块 i18n Key 更新 (45 分钟)
- [ ] T6: 文档辅助更新 (30 分钟)

---

## 🚨 注意事项

### Kiro 注意事项
1. **任务 K1 是关键路径**: Trae 的任务 T1 依赖 K1 的结果
2. **i18n Keys 更新要仔细**: 确保所有 key 都正确更新
3. **测试要全面**: 重命名后可能有遗漏的引用

### Trae 注意事项
1. **等待 K1 完成**: 不要提前重命名可能重复的模块
2. **使用 smartRelocate**: 确保自动更新所有引用
3. **首页链接要逐个检查**: 避免遗漏

### 协作注意事项
1. **实时沟通**: 发现问题立即通知对方
2. **避免冲突**: 不要同时修改同一个文件
3. **定期同步**: 每完成一个任务就同步进度

---

## ✅ 验收标准

### 必须达成 (P0)
- [ ] 所有 49 个模块重命名完成
- [ ] 所有组件文件夹同步重命名
- [ ] 首页所有链接正常工作
- [ ] i18n keys 全部更新
- [ ] 编译零错误
- [ ] ESLint 零警告
- [ ] 所有模块可访问

### 应该达成 (P1)
- [ ] 无重复模块
- [ ] 文档全部更新
- [ ] 变更日志创建
- [ ] 测试报告完成

---

## 📝 Trae 任务详细说明

### 如何使用 smartRelocate

**示例 1: 重命名模块文件夹**
```typescript
smartRelocate("src/app/chamber/p1-02", "src/app/chamber/sp1-02")
```

**示例 2: 重命名组件文件夹**
```typescript
smartRelocate("src/components/chamber/p1-02", "src/components/chamber/sp1-02")
```

**注意**: `smartRelocate` 会自动更新所有 import 引用，无需手动修改。

### 如何批量更新首页链接

**方法 1: 使用编辑器的查找替换**
1. 打开 `src/app/page.tsx`
2. 查找: `/chamber/s(\d+-\d+)`
3. 替换: `/chamber/sm$1`
4. 重复其他前缀

**方法 2: 使用 strReplace 工具**
```typescript
strReplace({
  path: "src/app/page.tsx",
  oldStr: '/chamber/s2-01',
  newStr: '/chamber/sm2-01'
})
```

### 如何更新模块内的 i18n Key

**在每个重命名后的模块中**:
1. 打开模块文件 (如 `src/app/chamber/sm2-01/page.tsx`)
2. 查找: `t("s2_01`
3. 替换: `t("sm2_01`
4. 保存并验证

---

## 🎯 开始执行

**Kiro**: 准备好了吗？我将立即开始任务 K1！

**Trae**: 请查看你的任务清单，准备在 Kiro 完成 K1 后开始执行！

**预计完成时间**: 今天下午 13:00

---

**制定人**: Kiro AI  
**协作人**: Trae AI  
**执行日期**: 2026-02-06  
**状态**: ⏳ 等待确认
