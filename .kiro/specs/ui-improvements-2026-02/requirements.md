# UI改进需求 - 2026年2月7日

## 1. 用户故事

### 1.1 可拖动分界线
**作为**用户  
**我想要**能够拖动左右分界线调整内容区和可视化区的大小  
**以便**根据需要放大或缩小3D可视化区域

**验收标准**:
- [ ] 分界线默认位置为50/50
- [ ] 可以通过鼠标拖动调整分界线位置
- [ ] 最小左侧宽度25%，最大75%
- [ ] 每个模块独立保存分界线位置到localStorage
- [ ] 双击分界线重置为50/50
- [ ] 拖动时显示视觉反馈（高亮、光标变化）
- [ ] 右侧3D图形响应式缩放以适应容器大小

### 1.2 3D控制系统
**作为**用户  
**我想要**有明确的3D控制说明和Reset按钮  
**以便**知道如何操作3D可视化并能重置视角

**验收标准**:
- [ ] 所有3D场景默认不自动旋转
- [ ] 用户可以通过拖动鼠标旋转视角
- [ ] 提供Reset按钮恢复初始视角
- [ ] 提供"使用说明"按钮，显示操作指南
- [ ] 说明包含：旋转、缩放、重置的操作方法
- [ ] 控制面板位于右上角，不遮挡主要内容

### 1.3 SM1.01立方体可旋转
**作为**用户  
**我想要**体积部分的立方体可以旋转  
**以便**查看所有边的长度

**验收标准**:
- [ ] 立方体使用Three.js渲染（3D）
- [ ] 可以通过拖动旋转查看所有面
- [ ] 初始视角为斜视图（能看到3个面）
- [ ] 边长标签清晰可见
- [ ] 添加OrbitControls支持旋转和缩放

### 1.4 SM2.01动画控制
**作为**用户  
**我想要**手动控制(a+b)³的展开/收起动画  
**以便**有足够时间观察和理解展开结构

**验收标准**:
- [ ] 提供"展开"按钮触发爆炸动画
- [ ] 提供"收起"按钮恢复到立方体状态
- [ ] 展开后保持状态，不自动收起
- [ ] 公式标签固定在屏幕上，不随3D对象旋转
- [ ] 爆炸后所有小立方体方向一致
- [ ] 通过颜色区分4个代数项（a³, 3a²b, 3ab², b³）
- [ ] 添加图例说明颜色对应关系
- [ ] 禁用自动旋转，只允许用户手动拖动

### 1.5 任务背景说明
**作为**用户  
**我想要**每个任务有清晰的背景说明  
**以便**理解任务的实际应用场景

**验收标准**:
- [ ] 每个任务添加context字段（EN/CN/DE）
- [ ] 背景说明使用通用情境，不强制Basel本地化
- [ ] 背景说明在任务标题之前显示
- [ ] 文字清晰易读，有适当的间距和样式
- [ ] 至少为15个主要模块添加任务背景

### 1.6 模块图标补充
**作为**用户  
**我想要**所有模块都有相关的概念图标  
**以便**快速识别模块内容

**验收标准**:
- [ ] 检查ConceptIcon.tsx中已有的图标
- [ ] 为约30个缺失图标的模块添加新图标
- [ ] 图标设计简洁，与模块主题相关
- [ ] 使用motion动画增加趣味性
- [ ] 图标在ModuleCard中正确显示

## 2. 技术约束

- 使用React 18+ 和 TypeScript
- 使用Three.js和React Three Fiber处理3D渲染
- 使用localStorage保存用户偏好
- 保持现有的设计风格和配色方案
- 确保响应式设计（桌面、平板、移动端）
- 不破坏现有功能

## 3. 非功能需求

- 性能：拖动分界线应流畅（60fps）
- 可访问性：提供键盘快捷键支持
- 兼容性：支持Chrome、Firefox、Safari、Edge
- 可维护性：代码模块化，易于扩展

## 4. 优先级

**P0 - 必须完成**:
- 可拖动分界线系统
- 3D控制系统（Reset + 使用说明）
- SM2.01动画控制

**P1 - 应该完成**:
- SM1.01立方体可旋转
- 任务背景说明（15个主要模块）

**P2 - 可以完成**:
- 模块图标补充（30个）
- 其他模块的任务背景说明

## 5. 验收测试

### 5.1 功能测试
- [ ] 所有模块的分界线可拖动
- [ ] 分界线位置正确保存和恢复
- [ ] 3D控制按钮在所有Canvas组件正常工作
- [ ] SM1.01立方体可旋转
- [ ] SM2.01动画可手动控制
- [ ] 任务背景说明正确显示
- [ ] 模块图标正确显示

### 5.2 浏览器测试
- [ ] Chrome (最新版)
- [ ] Firefox (最新版)
- [ ] Safari (最新版)
- [ ] Edge (最新版)

### 5.3 响应式测试
- [ ] 桌面端 (1920x1080)
- [ ] 平板端 (768x1024)
- [ ] 移动端 (375x667)

## 6. 交付物

1. ResizableLayout组件
2. Canvas3DControls组件
3. 更新的SM1.01模块（3D立方体）
4. 更新的SM2.01模块（动画控制）
5. 更新的i18n.ts（任务背景说明）
6. 更新的ConceptIcon.tsx（新图标）
7. 所有模块页面集成ResizableLayout
8. 测试报告
9. 用户文档

## 7. 时间估算

- 可拖动分界线：4小时
- 3D控制系统：4小时
- SM1.01改进：2小时
- SM2.01改进：4小时
- 任务背景说明：2小时
- 模块图标：3小时
- 测试和调试：2小时

**总计：21小时**
