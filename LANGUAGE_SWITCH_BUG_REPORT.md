# 语言切换 Bug 诊断报告

**报告时间**: 2026-02-18  
**诊断工具**: `diagnose_language_switch_bug.py`  
**问题严重性**: 🚨 严重 - 影响用户体验

---

## 📋 执行摘要

### 问题描述
用户切换语言时，模块内的问题描述（context）和场景（scenario）不会更新，只有标题和按钮等 UI 元素会切换语言。

### 根本原因
使用了 `useCallback` 且依赖数组为空 `[]`，导致内部的 `t()` 函数调用被"冻结"在首次渲染时的语言。

### 影响范围
- **总模块数**: 78 个
- **受影响模块**: 12 个 (15.4%)
- **正常模块**: 66 个 (84.6%)

---

## 🔍 诊断结果

### 严重问题模块（12 个）

| 模块 | 主题 | 状态 | 优先级 |
|------|------|------|--------|
| **SM1-03** | 数学-整数 | ❌ 语言切换失效 | 🔴 高（已完成 i18n） |
| **SM1-04** | 数学-代数 | ❌ 语言切换失效 | 🔴 高（已完成 i18n） |
| **SM2-08** | 数学-几何 | ❌ 语言切换失效 | 🔴 高（已完成 i18n） |
| **GC1-02** | 生物 | ❌ 语言切换失效 | 🟡 中 |
| **SB2-01-TISSUES** | 生物-组织 | ❌ 语言切换失效 | 🟡 中 |
| **SB2-02-BODY-SYSTEMS** | 生物-系统 | ❌ 语言切换失效 | 🟡 中 |
| **SC2-01** | 化学 | ❌ 语言切换失效 | 🟡 中 |
| **SM1-05** | 数学 | ❌ 语言切换失效 | 🟡 中 |
| **SM2-10** | 数学 | ❌ 语言切换失效 | 🟡 中 |
| **SM3-05** | 数学 | ❌ 语言切换失效 | 🟡 中 |
| **SP3-05** | 物理 | ❌ 语言切换失效 | 🟡 中 |
| **SP3-06** | 物理 | ❌ 语言切换失效 | 🟡 中 |

---

## 🛠️ 修复进度

### Phase 1: 高优先级模块（3 个）
- [ ] SM1-03 - 数学整数（60 个翻译）
- [ ] SM1-04 - 数学代数（19 个翻译）
- [ ] SM2-08 - 数学几何（15 个翻译）

### Phase 2: 其他模块（9 个）
- [ ] GC1-02
- [ ] SB2-01-TISSUES
- [ ] SB2-02-BODY-SYSTEMS
- [ ] SC2-01
- [ ] SM1-05
- [ ] SM2-10
- [ ] SM3-05
- [ ] SP3-05
- [ ] SP3-06

**总进度**: 0/12 (0%)
