# 剩余任务 - 2026年2月7日

## 已完成 ✅

### 1. 首页布局调整
- STEM精通度雷达图已移到header区域（语言选择下方）
- 雷达图尺寸缩小（260px → 180px）
- 模块列表现在更突出，用户可以直接看到学习主题

## 待完成任务

### 2. SM1.01 添加任务场景背景 🔄

**需求**：为每个任务添加真实的背景故事

**当前状态**：
- 建筑师：只有"任务：展开蓝图以购买准确面积"
- 回收员：只有任务描述
- 速算者：只有任务描述
- 航行者：只有任务描述

**需要添加**：
```
建筑师场景：
"一位建筑师正在为客户设计新房子。客户的客厅需要铺设新地毯。
建筑师测量了房间的尺寸，现在需要计算准确的地毯面积，
以便向地毯供应商订购合适数量的材料。"

任务：展开蓝图以购买准确面积的地毯

回收员场景：
"一个回收中心需要订购新的回收箱。每个回收箱的容积是固定的。
回收中心经理需要计算需要多少个回收箱才能容纳本周收集的所有材料。"

任务：计算所需回收箱数量

速算者场景：
"一位数学竞赛选手正在训练快速计算能力。
教练给出了一系列几何图形，要求在最短时间内计算出所有面积。"

任务：快速计算所有图形面积

航行者场景：
"一艘帆船正在海上航行。船长需要计算从当前位置到目的地港口的最短距离。
使用GPS坐标，船长可以通过勾股定理计算直线距离。"

任务：计算航行距离
```

**修改文件**：
- `src/lib/i18n.ts` - 添加场景文本（EN/CN/DE三种语言）
- `src/app/chamber/sm1-01/page.tsx` - 在任务描述前显示场景

### 3. SM2.01 改为二项式平方 (a+b)² 🔄

**问题**：当前使用 (a+b)³ 立方展开，但模块名称是"二项式工厂"，应该展示平方

**需要修改**：
1. 从 (a+b)³ = a³ + 3a²b + 3ab² + b³ (8个立方体)
2. 改为 (a+b)² = a² + 2ab + b² (4个正方形)

**可视化方案**：
- 使用2D或简单3D展示
- 4个区域：
  - 左上：a² (红色正方形)
  - 右上：ab (橙色矩形)
  - 左下：ab (橙色矩形)
  - 右下：b² (绿色正方形)
- 展开时分离这4个区域
- 收起时组合成 (a+b)² 的大正方形

**修改文件**：
- `src/components/chamber/sm2-01/BinomialCanvas.tsx` - 完全重写
- 或创建新文件 `src/components/chamber/sm2-01/BinomialSquareCanvas.tsx`

### 4. SM2.02 勾股定理完全重做 🔄

**问题**：
1. 3D图形自动旋转，用户无法看清
2. 方块的意义不清楚
3. 对初二学生来说太复杂

**需求**：
- 禁用所有自动旋转
- 重新设计可视化，可能只用2D
- 让初二学生容易理解

**设计方案A - 经典面积证明（2D）**：
```
显示一个直角三角形，边长为 a, b, c
在三条边上分别绘制正方形：
- a边上的正方形（面积 a²）
- b边上的正方形（面积 b²）
- c边上的正方形（面积 c²）

动画展示：
1. 显示三角形和三个正方形
2. 将a²和b²的正方形分割成小方块
3. 动画移动这些方块，填充到c²的正方形中
4. 证明 a² + b² = c²
```

**设计方案B - 网格计数（2D）**：
```
使用网格纸的概念：
1. 在网格上绘制直角三角形
2. 在每条边上绘制正方形
3. 用不同颜色填充每个正方形的网格
4. 计数每个正方形的格子数
5. 验证 a² + b² = c²
```

**设计方案C - 简化3D（可选）**：
```
如果必须用3D：
- 完全禁用自动旋转
- 只显示三角形和三个正方形（不要复杂的方块动画）
- 清晰标注每个正方形的面积
- 添加Canvas3DControls
- 初始视角固定，用户可以手动旋转查看
```

**推荐**：方案A（经典面积证明）最适合初二学生

**修改文件**：
- `src/components/chamber/sm2-02/PythagorasCanvas.tsx` - 完全重写
- 或创建新文件 `src/components/chamber/sm2-02/PythagorasSimple2D.tsx`

### 5. 禁用所有模块的自动旋转 ✅

**状态**：大部分已完成
- SM2.01: ✅ 已禁用
- SM1.01: ✅ 已禁用（Cube3D）
- SM2.02: ❌ 仍有自动旋转（需要重做）
- 其他模块：需要检查

**需要检查的模块**：
- 所有使用 `autoRotate={true}` 的Canvas组件
- 所有使用 `useFrame` 进行旋转动画的组件

## 优先级

**P0 - 立即处理**：
1. SM2.02 勾股定理重做（最重要，用户强调多次）
2. SM2.01 改为二项式平方
3. SM1.01 添加任务场景

**P1 - 尽快处理**：
4. 检查并禁用其他模块的自动旋转

## 技术建议

### SM2.02 重做步骤：
1. 创建新的2D Canvas组件（使用SVG或HTML Canvas）
2. 实现经典面积证明动画
3. 添加清晰的标注和说明
4. 测试确保初二学生能理解
5. 替换现有的3D可视化

### SM2.01 改为平方步骤：
1. 设计 (a+b)² 的4区域布局
2. 实现展开/收起动画（2D或简单3D）
3. 添加颜色编码和图例
4. 确保公式固定显示

### SM1.01 场景添加步骤：
1. 在 i18n.ts 添加场景文本（EN/CN/DE）
2. 修改 page.tsx 显示场景
3. 调整布局，场景在任务描述之前

## 用户反馈要点

1. ✅ 首页雷达图太大，喧宾夺主 → 已移到header
2. 🔄 需要真实的任务场景背景
3. 🔄 SM2.01应该是平方，不是立方
4. 🔄 SM2.02太复杂，需要简化
5. ✅ 禁用所有自动旋转 → 大部分已完成

## 下一步行动

建议按以下顺序处理：
1. 先完成SM2.02重做（用户最关心）
2. 然后SM2.01改为平方
3. 最后添加SM1.01场景

每完成一个任务就提交并推送，让用户可以及时查看进度。
