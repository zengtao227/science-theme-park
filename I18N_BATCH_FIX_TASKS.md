# I18N 批量修复任务追踪

**开始时间**: 2026-02-18  
**策略**: B + C 混合 - 优先处理 6 个高优先级模块  
**目标**: 完美国际化，确保 LaTeX 格式和三语切换

---

## 📊 总体进度

- [ ] **SP3-04** - 63 个硬编码文本（物理-压力/浮力/液压）
- [ ] **SM1-03** - 60 个硬编码文本（数学-整数）
- [ ] **SM2-08** - 15 个硬编码文本（数学-几何）
- [ ] **SM1-04** - 19 个硬编码文本（数学-代数）
- [ ] **GP2-02** - 19 个硬编码文本（物理-热力学）
- [ ] **SC3-01** - 19 个硬编码文本（化学-有机化学）

**总计**: 195 个硬编码文本需要国际化

---

## 🔄 当前任务：SP3-04

### 任务详情
- **模块**: `src/app/chamber/sp3-04/page.tsx`
- **硬编码数量**: 63 个
- **主题分类**:
  - PRESSURE (压力): 20 个问题
  - BUOYANCY (浮力): 20 个问题
  - HYDRAULICS (液压): 23 个问题

### 执行步骤

#### 1. 生成翻译文件
- [ ] 创建 EN 翻译 (63 条)
- [ ] 创建 CN 翻译 (63 条)
- [ ] 创建 DE 翻译 (63 条)

#### 2. 更新 i18n 文件
- [ ] 更新 `src/lib/i18n/en/physics.ts`
- [ ] 更新 `src/lib/i18n/cn/physics.ts`
- [ ] 更新 `src/lib/i18n/de/physics.ts`

#### 3. 更新模块代码
- [ ] 修改 `buildStagePool` 函数签名，添加 `t` 参数
- [ ] 替换所有 63 个 `promptLatex` 硬编码文本
- [ ] 更新 `useQuestManager` 的 `buildPool` 闭包

#### 4. 验证
- [ ] 运行 `npm run build`
- [ ] 检查 0 errors
- [ ] 提交更改

---

## 📝 详细执行日志

### SP3-04 执行记录

**开始时间**: 进行中...

#### 翻译键命名规范
```
sp3_04.prompts.{stage}_{difficulty}_{number}

示例:
- pressure_basic_1
- pressure_core_2
- buoyancy_advanced_3
- hydraulics_elite_4
```

#### 质量检查点
- ✅ LaTeX 反斜杠保护 (`\\text{}`, `\\rho`, `\\times`)
- ✅ 数学符号不翻译 (P, F, A, V 等变量)
- ✅ 单位格式正确 (`\\text{ m}^2`)
- ✅ 数值保持不变
- ✅ 物理术语专业准确

---

## 🎯 下一步计划

完成 SP3-04 后，按以下顺序处理：

1. **SM1-03** (60 个) - 数学整数
2. **SM2-08** (15 个) - 数学几何
3. **SM1-04** (19 个) - 数学代数
4. **GP2-02** (19 个) - 物理热力学
5. **SC3-01** (19 个) - 化学有机化学

---

## 📌 注意事项

1. **每个模块完成后必须**:
   - 运行构建验证
   - 提交 git commit
   - 更新此文档状态

2. **代码更新关键点**:
   - `buildStagePool` 必须接收 `t` 函数
   - `useQuestManager` 的 `buildPool` 必须传递 `t`
   - 确保闭包正确，语言切换实时生效

3. **翻译质量标准**:
   - 物理/数学术语必须专业准确
   - LaTeX 格式完全保留
   - 三语翻译保持一致性

---

**最后更新**: 2026-02-18 (任务创建)
